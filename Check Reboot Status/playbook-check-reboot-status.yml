- hosts: all
  gather_facts: no

  tasks:
    - name: Check for pending reboot
      win_reboot:
        test_command: "(Get-CimInstance -ClassName Win32_OperatingSystem).RebootRequired" 
      register: reboot_status

    - name: Output reboot status
      debug:
        msg: "Reboot pending: {{ reboot_status.reboot_required }}"
