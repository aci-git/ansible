- hosts: all

  tasks:
    - name: Check if reboot is pending
      win_shell: "(Get-CimInstance -ClassName Win32_OperatingSystem).RebootRequired"
      register: reboot_pending_result

    - name: Output reboot status
      debug:
        msg: "Reboot pending: {{ reboot_pending_result.stdout_lines[0] == 'True' }}"
