# Ansible playbook to run GitHub upgrade script 

- hosts: windows_servers

  tasks:

    - name: Ensure temp folder exists
      win_file:
        path: C:\temp
        state: directory

    - name: Download script from GitHub
      win_get_url:
        url: https://raw.githubusercontent.com/myaccount/scripts/main/inplace_upgrade.ps1  
        dest: C:\temp\inplace_upgrade.ps1

    - name: Run upgrade script
      win_powershell: 
        script: C:\temp\inplace_upgrade.ps1
      register: upgrade_output

    - name: Show output  
      debug:
        var: upgrade_output
